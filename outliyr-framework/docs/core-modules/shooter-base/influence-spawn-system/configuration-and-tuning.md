# Configuration & Tuning

The `UShooterPlayerSpawningManagmentComponent` provides several exposed properties that allow you to tune the behavior of the base Influence Spawn System logic without needing to write custom code or Blueprint graphs. Adjusting these parameters lets you fine-tune the sensitivity and relative importance of the core safety checks (Enemy FOV and proximity factors).

### Exposed Properties

These properties can typically be modified directly on the component instance added to your Game Mode (if configured that way via Experiences) or, more commonly, by modifying the Class Defaults of the `UShooterPlayerSpawningManagmentComponent` C++ class or a Blueprint subclass you create (even if that subclass doesn't override functions).

1. **`EnemyFOVAngle` (float)**
   * **Default:** `90.0f` (degrees)
   * **Purpose:** Defines the total horizontal field of view angle used for the Enemy Line of Sight check (`CalculateEnemyFOVBias`).
   * **Effect:**
     * **Increasing** this value makes the FOV cone wider, causing the system to penalize spawn points over a larger area in front of enemies. This makes the check more aggressive/safer but might restrict available spawn locations more heavily.
     * **Decreasing** this value narrows the cone, making the check less strict. Spawn points need to be more directly in front of an enemy to receive the strong FOV penalty.
   * **Tuning:** Adjust this based on typical engagement distances and desired spawn safety margin.
2. **`FOVBiasWeight` (float)**
   * **Default:** `1.0f`
   * **Purpose:** Intended as a multiplier to scale the overall negative bias generated by the `CalculateEnemyFOVBias` function.
   * **Effect:**
     * **Increasing** this value makes the penalty for being within _any_ part of an enemy's FOV stronger relative to other bias factors.
     * **Decreasing** this value reduces the impact of the FOV check compared to distance penalties.
   * **Implementation Note:** As mentioned previously, the provided code snippet for `CalculateEnemyFOVBias` uses a hardcoded multiplier (`200.0f`) and doesn't directly multiply by `FOVBiasWeight`. To make this property effective for tuning, you would need to either:
     * Modify the base C++ `CalculateEnemyFOVBias` function to incorporate this weight: `TotalFOVBias += FOVBiasWeight * 200.0f * FOVScore;`
     * Or, use this weight within a custom override of `CalculateGameModeBias` if you implement alternative FOV logic there.
   * **Tuning (Assuming Modified Logic):** Use this to balance the importance of direct line-of-sight versus general proximity to enemies.
3. **Proximity Weight Properties**
   * `TeammateDistanceWeight` (Default: `1.0f`)
   * `DeadTeammateDistanceWeight` (Default: `1.0f`)
   * `EnemyDistanceWeight` (Default: `1.0f`)
   * **Purpose:** These are conceptually intended to scale the positive or negative bias contribution based on distance to living teammates, dead teammates, and enemies, respectively.
   * **Effect (Intended):** Higher values would make distance a more significant factor for that category (e.g., a higher `EnemyDistanceWeight` makes spawning near enemies much more heavily penalized). Lower values reduce the influence of distance for that category.
   * **Implementation Note:** Similar to `FOVBiasWeight`, the provided code snippet for `CalculateSpawnBias` uses hardcoded scaling factors (`100.0f` for living teammates/enemies, `50.0f` for dead teammates) and **does not directly multiply** by these weight properties.
   *   **Tuning (Assuming Modified Logic):** To make these effective, you would need to modify the base C++ `CalculateSpawnBias` function to include them in the formulas:

       ```cpp
       // Example Modification
       if(IsPlayerDead(PS)) {
           SpawnBias -= DeadTeammateDistanceWeight * 50.0f / FMath::Max(Distance, 1.0f);
       } else {
           SpawnBias += TeammateDistanceWeight * 100.0f / FMath::Max(Distance, 1.0f);
       }
       // ...
       else // Enemy
       {
           SpawnBias -= EnemyDistanceWeight * 100.0f / FMath::Max(Distance, 1.0f);
       }
       ```

       With such modifications, these weights would allow designers to easily fine-tune the relative importance of staying near allies, avoiding enemies, and avoiding death locations via configuration changes.

### Tuning Strategy

* **Start with Defaults:** Begin testing with the default values.
* **Observe Behavior:** Playtest extensively, paying attention to where players spawn relative to teammates and enemies, especially immediately after respawning. Note any frustratingly bad spawns (too close to enemies, directly in view).
* **Adjust Incrementally:**
  * If players are spawning too close to enemies despite distance checks, consider increasing the _intended_ influence of `EnemyDistanceWeight` (by modifying the code or adding logic in overrides) or ensure the `EnemyFOVAngle` isn't too narrow.
  * If players frequently spawn directly in view, check if `EnemyFOVAngle` is appropriate and consider increasing the _intended_ influence of `FOVBiasWeight`.
  * If team cohesion is poor, consider increasing the _intended_ influence of `TeammateDistanceWeight`.
  * If players keep spawning near recent death locations, increase the _intended_ influence of `DeadTeammateDistanceWeight`.
* **Consider Game Mode:** The ideal balance will vary depending on map size, player count, game mode objectives, and typical engagement ranges. Fast-paced modes might tolerate slightly riskier spawns than slower, tactical modes.
* **Iterate:** Tuning is often an iterative process. Make small adjustments, test thoroughly, and repeat.

While the direct effectiveness of the weight properties depends on potential code modifications to utilize them fully, adjusting the `EnemyFOVAngle` provides an immediate way to configure the line-of-sight check sensitivity. For more significant behavioral changes, refer to the "Customization & Extension" page.

***
